{{define "content"}}
<div class="page-header">
    <h1 class="page-title">{{T .AdminLang "forms.title"}}</h1>
    <div class="page-actions">
        <a href="/admin/forms/new" class="btn btn-primary">{{T .AdminLang "forms.new"}}</a>
    </div>
</div>

{{if .Data.Forms}}
<div class="table-container">
    <table class="table">
        <thead>
            <tr>
                <th>{{T .AdminLang "label.name"}}</th>
                <th>{{T .AdminLang "label.title"}}</th>
                <th>{{T .AdminLang "label.slug"}}</th>
                <th>{{T .AdminLang "forms.submissions"}}</th>
                <th>{{T .AdminLang "label.status"}}</th>
                <th>{{T .AdminLang "label.actions"}}</th>
            </tr>
        </thead>
        <tbody>
            {{range .Data.Forms}}
            <tr>
                <td>
                    <a href="/admin/forms/{{.Form.ID}}" class="link-primary">{{.Form.Name}}</a>
                </td>
                <td>{{.Form.Title}}</td>
                <td><code>{{.Form.Slug}}</code></td>
                <td>
                    <a href="/admin/forms/{{.Form.ID}}/submissions" class="link-secondary">
                        {{.SubmissionCount}} {{if ne .SubmissionCount 1}}{{T $.AdminLang "forms.submissions_plural"}}{{else}}{{T $.AdminLang "forms.submission"}}{{end}}
                        {{if gt .UnreadCount 0}}
                        <span class="badge badge-primary">{{.UnreadCount}} {{T $.AdminLang "forms.new_badge"}}</span>
                        {{end}}
                    </a>
                </td>
                <td>
                    {{if .Form.IsActive}}
                    <span class="badge badge-success">{{T $.AdminLang "forms.active"}}</span>
                    {{else}}
                    <span class="badge badge-secondary">{{T $.AdminLang "forms.inactive"}}</span>
                    {{end}}
                </td>
                <td>
                    <div class="btn-group">
                        <a href="/admin/forms/{{.Form.ID}}" class="btn btn-sm btn-secondary">{{T $.AdminLang "btn.edit"}}</a>
                        <a href="/forms/{{.Form.Slug}}" class="btn btn-sm btn-outline" target="_blank">{{T $.AdminLang "forms.preview"}}</a>
                        <button type="button"
                                class="btn btn-sm btn-danger"
                                hx-delete="/admin/forms/{{.Form.ID}}"
                                hx-confirm="{{T $.AdminLang "forms.confirm_delete"}}"
                                hx-target="closest tr"
                                hx-swap="outerHTML">
                            {{T $.AdminLang "btn.delete"}}
                        </button>
                    </div>
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>
{{else}}
<div class="empty-state">
    <h3>{{T .AdminLang "forms.no_forms"}}</h3>
    <p>{{T .AdminLang "forms.no_forms_hint"}}</p>
    <a href="/admin/forms/new" class="btn btn-primary">{{T .AdminLang "forms.create"}}</a>
</div>
{{end}}
{{end}}
