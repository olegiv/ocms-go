<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="oCMS - https://ocms.tech">
    <title>{{.SiteName}} - API Documentation</title>
    <link rel="stylesheet" href="/static/dist/main.css">
    <style>
        /* API Docs custom properties for dark mode support */
        :root {
            --docs-bg: #f8fafc;
            --docs-text: #1e293b;
            --docs-text-muted: #64748b;
            --docs-border: #e2e8f0;
            --docs-code-bg: #f1f5f9;
            --docs-primary: #3b82f6;
            --docs-success: #10b981;
            --docs-warning: #f59e0b;
            --docs-danger: #ef4444;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --docs-bg: #0f172a;
                --docs-text: #e2e8f0;
                --docs-text-muted: #94a3b8;
                --docs-border: #334155;
                --docs-code-bg: #1e293b;
            }
        }

        /* API docs specific overrides for dark mode */
        .docs-layout { background: var(--docs-bg); color: var(--docs-text); }
        .docs-sidebar { background: var(--docs-bg); border-color: var(--docs-border); }
        .docs-sidebar .sidebar-header { border-color: var(--docs-border); }
        .docs-sidebar .sidebar-title { color: var(--docs-text); }
        .docs-sidebar .nav-section-title { color: var(--docs-text-muted); }
        .docs-sidebar .nav-link { color: var(--docs-text); }
        .docs-sidebar .nav-link:hover,
        .docs-sidebar .nav-link.active { background: var(--docs-code-bg); }
        .docs-sidebar .nav-link.active { color: var(--docs-primary); }
        .docs-main h1, .docs-main h2, .docs-main h3, .docs-main h4 { color: var(--docs-text); }
        .docs-main h2 { border-color: var(--docs-border); }
        .docs-main p { color: var(--docs-text-muted); }
        .docs-main a { color: var(--docs-primary); }
        .docs-main code { background: var(--docs-code-bg); }
        .docs-main pre { background: var(--docs-code-bg); }
        .endpoint { border-color: var(--docs-border); }
        .endpoint-header { background: var(--docs-code-bg); border-color: var(--docs-border); }
        .endpoint-auth { color: var(--docs-text-muted); }
        .endpoint-auth .required { color: var(--docs-danger); }
        .endpoint-auth .optional { color: var(--docs-warning); }
        .params-table th, .params-table td { border-color: var(--docs-border); }
        .params-table th { color: var(--docs-text-muted); }
        .param-type { color: var(--docs-text-muted); }
        .param-required { color: var(--docs-danger); }
        .back-link { color: var(--docs-text-muted); }
        .back-link:hover { color: var(--docs-primary); }
        .info-box.info { background: rgba(59, 130, 246, 0.1); border-color: var(--docs-primary); }
        .info-box.warning { background: rgba(245, 158, 11, 0.1); border-color: var(--docs-warning); }
    </style>
</head>
<body>
    <div class="docs-layout">
        <!-- Sidebar Navigation -->
        <nav class="docs-sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    API Reference
                    <span class="sidebar-version">v1</span>
                </div>
            </div>
            <div class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Getting Started</div>
                    <a href="#overview" class="nav-link">Overview</a>
                    <a href="#authentication" class="nav-link">Authentication</a>
                    <a href="#rate-limiting" class="nav-link">Rate Limiting</a>
                    <a href="#responses" class="nav-link">Response Format</a>
                    <a href="#errors" class="nav-link">Error Handling</a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Endpoints</div>
                    <a href="#status" class="nav-link">Status</a>
                    <a href="#pages" class="nav-link">Pages</a>
                    <a href="#media" class="nav-link">Media</a>
                    <a href="#tags" class="nav-link">Tags</a>
                    <a href="#categories" class="nav-link">Categories</a>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="docs-main">
            <a href="/admin/api-keys" class="back-link">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                Back to Admin
            </a>

            <h1>{{.SiteName}} REST API</h1>
            <p>Complete reference for the {{.SiteName}} REST API. Build integrations, automate content management, and access your data programmatically.</p>

            <!-- Overview -->
            <section id="overview">
                <h2>Overview</h2>
                <p>The API is organized around REST principles. It uses standard HTTP methods, returns JSON-encoded responses, and uses standard HTTP response codes.</p>

                <div class="info-box info">
                    <div class="info-box-title">Base URL</div>
                    <p><code>{{.BaseURL}}/api/v1</code></p>
                </div>

                <h4>Available Resources</h4>
                <ul>
                    <li><strong>Pages</strong> - Content pages with SEO metadata, categories, and tags</li>
                    <li><strong>Media</strong> - Images, documents, and other uploaded files</li>
                    <li><strong>Tags</strong> - Content tags for organizing pages</li>
                    <li><strong>Categories</strong> - Hierarchical content categories</li>
                </ul>
            </section>

            <!-- Authentication -->
            <section id="authentication">
                <h2>Authentication</h2>
                <p>The API uses API keys for authentication. Include your API key in the <code>Authorization</code> header of your requests.</p>

                <pre><code>Authorization: Bearer YOUR_API_KEY</code></pre>

                <div class="info-box warning">
                    <div class="info-box-title">Important</div>
                    <p>Keep your API keys secure. Do not share them publicly or commit them to version control. If a key is compromised, revoke it immediately in the admin panel.</p>
                </div>

                <h4>Permission Scopes</h4>
                <p>API keys can have the following permissions:</p>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>Permission</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>pages:write</code></td>
                            <td>Create, update, and delete pages</td>
                        </tr>
                        <tr>
                            <td><code>media:write</code></td>
                            <td>Upload, update, and delete media files</td>
                        </tr>
                        <tr>
                            <td><code>taxonomy:write</code></td>
                            <td>Create, update, and delete tags and categories</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Public vs Protected Endpoints</h4>
                <p>Read endpoints (GET) for published content are generally public. Write endpoints (POST, PUT, DELETE) require authentication with appropriate permissions.</p>
            </section>

            <!-- Rate Limiting -->
            <section id="rate-limiting">
                <h2>Rate Limiting</h2>
                <p>To ensure fair usage, the API implements rate limiting:</p>
                <ul>
                    <li><strong>Global limit:</strong> 100 requests per second (burst: 200)</li>
                    <li><strong>Per-key limit:</strong> 10 requests per second per API key (burst: 20)</li>
                </ul>
                <p>When rate limited, requests return a <code>429 Too Many Requests</code> response.</p>
            </section>

            <!-- Response Format -->
            <section id="responses">
                <h2>Response Format</h2>
                <p>All responses are JSON-encoded and follow a consistent structure.</p>

                <h4>Success Response</h4>
                <pre><code>{
    "data": { ... },
    "meta": {
        "total": 100,
        "page": 1,
        "per_page": 20,
        "pages": 5
    }
}</code></pre>

                <h4>Single Resource</h4>
                <pre><code>{
    "data": {
        "id": 1,
        "title": "My Page",
        ...
    }
}</code></pre>

                <h4>Response Codes</h4>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><code>200</code></td><td>Success - Request completed successfully</td></tr>
                        <tr><td><code>201</code></td><td>Created - Resource created successfully</td></tr>
                        <tr><td><code>204</code></td><td>No Content - Resource deleted successfully</td></tr>
                        <tr><td><code>400</code></td><td>Bad Request - Invalid parameters</td></tr>
                        <tr><td><code>401</code></td><td>Unauthorized - Missing or invalid API key</td></tr>
                        <tr><td><code>403</code></td><td>Forbidden - Missing required permission</td></tr>
                        <tr><td><code>404</code></td><td>Not Found - Resource not found</td></tr>
                        <tr><td><code>422</code></td><td>Unprocessable Entity - Validation errors</td></tr>
                        <tr><td><code>429</code></td><td>Too Many Requests - Rate limit exceeded</td></tr>
                        <tr><td><code>500</code></td><td>Internal Server Error</td></tr>
                    </tbody>
                </table>
            </section>

            <!-- Errors -->
            <section id="errors">
                <h2>Error Handling</h2>
                <p>Error responses include a code, message, and optional field-specific details.</p>

                <pre><code>{
    "error": {
        "code": "validation_error",
        "message": "Validation failed",
        "details": {
            "title": "Title is required",
            "slug": "Slug already exists"
        }
    }
}</code></pre>

                <h4>Error Codes</h4>
                <table class="params-table">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><code>bad_request</code></td><td>Invalid input data</td></tr>
                        <tr><td><code>unauthorized</code></td><td>Authentication required</td></tr>
                        <tr><td><code>forbidden</code></td><td>Insufficient permissions</td></tr>
                        <tr><td><code>not_found</code></td><td>Resource not found</td></tr>
                        <tr><td><code>validation_error</code></td><td>Field validation failed</td></tr>
                        <tr><td><code>conflict</code></td><td>Business logic conflict</td></tr>
                        <tr><td><code>rate_limited</code></td><td>Rate limit exceeded</td></tr>
                        <tr><td><code>internal_error</code></td><td>Server error</td></tr>
                    </tbody>
                </table>
            </section>

            <!-- Status Endpoint -->
            <section id="status">
                <h2>Status</h2>
                <p>Check API availability and version.</p>

                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/status</span>
                        <span class="endpoint-auth">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Returns the current API status and version.</p>
                        <div class="response-section">
                            <div class="response-title">Response</div>
                            <pre><code>{
    "data": {
        "status": "ok",
        "version": "v1"
    }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/auth</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Returns information about the authenticated API key.</p>
                        <div class="response-section">
                            <div class="response-title">Response</div>
                            <pre><code>{
    "data": {
        "key_prefix": "ocms_abc1",
        "name": "My API Key",
        "permissions": ["pages:write", "media:write"]
    }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pages Endpoints -->
            <section id="pages">
                <h2>Pages</h2>
                <p>Manage content pages with SEO metadata, categories, and tags.</p>

                <!-- List Pages -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/pages</span>
                        <span class="endpoint-auth"><span class="optional">Auth Optional</span></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">List pages. Public requests only see published pages. Authenticated requests can filter by status.</p>

                        <h4>Query Parameters</h4>
                        <table class="params-table">
                            <thead>
                                <tr><th>Parameter</th><th>Type</th><th>Description</th></tr>
                            </thead>
                            <tbody>
                                <tr><td class="param-name">status</td><td class="param-type">string</td><td><code>draft</code> or <code>published</code> (auth required for draft)</td></tr>
                                <tr><td class="param-name">category</td><td class="param-type">integer</td><td>Filter by category ID</td></tr>
                                <tr><td class="param-name">tag</td><td class="param-type">integer</td><td>Filter by tag ID</td></tr>
                                <tr><td class="param-name">page</td><td class="param-type">integer</td><td>Page number (default: 1)</td></tr>
                                <tr><td class="param-name">per_page</td><td class="param-type">integer</td><td>Items per page (default: 20, max: 100)</td></tr>
                                <tr><td class="param-name">sort</td><td class="param-type">string</td><td><code>created_at</code>, <code>updated_at</code>, <code>published_at</code>, <code>title</code></td></tr>
                                <tr><td class="param-name">order</td><td class="param-type">string</td><td><code>asc</code> or <code>desc</code> (default: desc)</td></tr>
                                <tr><td class="param-name">include</td><td class="param-type">string</td><td>Comma-separated: <code>author</code>, <code>categories</code>, <code>tags</code></td></tr>
                            </tbody>
                        </table>

                        <div class="response-section">
                            <div class="response-title">Example Response</div>
                            <pre><code>{
    "data": [
        {
            "id": 1,
            "title": "Welcome to our site",
            "slug": "welcome",
            "body": "Content here...",
            "status": "published",
            "author_id": 1,
            "language_id": 1,
            "created_at": "2024-01-01T12:00:00Z",
            "updated_at": "2024-01-01T12:00:00Z",
            "published_at": "2024-01-01T12:00:00Z",
            "featured_image_id": null,
            "meta_title": "Welcome",
            "meta_description": "Welcome to our site",
            "author": {
                "id": 1,
                "name": "Admin",
                "email": "admin@example.com"
            },
            "categories": [],
            "tags": []
        }
    ],
    "meta": {
        "total": 10,
        "page": 1,
        "per_page": 20,
        "pages": 1
    }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Get Page by ID -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/pages/{id}</span>
                        <span class="endpoint-auth"><span class="optional">Auth Optional</span></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Get a single page by ID. Public requests only see published pages.</p>

                        <h4>Path Parameters</h4>
                        <table class="params-table">
                            <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">id <span class="param-required">required</span></td><td class="param-type">integer</td><td>Page ID</td></tr>
                            </tbody>
                        </table>

                        <h4>Query Parameters</h4>
                        <table class="params-table">
                            <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">include</td><td class="param-type">string</td><td>Comma-separated: <code>author</code>, <code>categories</code>, <code>tags</code></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Get Page by Slug -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/pages/slug/{slug}</span>
                        <span class="endpoint-auth"><span class="optional">Auth Optional</span></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Get a single page by slug. Useful for fetching pages by their URL-friendly identifier.</p>

                        <h4>Path Parameters</h4>
                        <table class="params-table">
                            <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">slug <span class="param-required">required</span></td><td class="param-type">string</td><td>Page slug (e.g., "about-us")</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Create Page -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/api/v1/pages</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>pages:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Create a new page.</p>

                        <h4>Request Body</h4>
                        <table class="params-table">
                            <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">title <span class="param-required">required</span></td><td class="param-type">string</td><td>Page title</td></tr>
                                <tr><td class="param-name">slug <span class="param-required">required</span></td><td class="param-type">string</td><td>URL slug (must be unique)</td></tr>
                                <tr><td class="param-name">body</td><td class="param-type">string</td><td>Page content (HTML/Markdown)</td></tr>
                                <tr><td class="param-name">status</td><td class="param-type">string</td><td><code>draft</code> or <code>published</code> (default: draft)</td></tr>
                                <tr><td class="param-name">language_id</td><td class="param-type">integer</td><td>Language ID (defaults to system default language)</td></tr>
                                <tr><td class="param-name">featured_image_id</td><td class="param-type">integer</td><td>Media ID for featured image</td></tr>
                                <tr><td class="param-name">meta_title</td><td class="param-type">string</td><td>SEO title (recommended ~60 chars)</td></tr>
                                <tr><td class="param-name">meta_description</td><td class="param-type">string</td><td>SEO description (recommended ~160 chars)</td></tr>
                                <tr><td class="param-name">meta_keywords</td><td class="param-type">string</td><td>Meta keywords</td></tr>
                                <tr><td class="param-name">og_image_id</td><td class="param-type">integer</td><td>Media ID for Open Graph image</td></tr>
                                <tr><td class="param-name">no_index</td><td class="param-type">boolean</td><td>Exclude from search engines</td></tr>
                                <tr><td class="param-name">no_follow</td><td class="param-type">boolean</td><td>Don't follow links</td></tr>
                                <tr><td class="param-name">canonical_url</td><td class="param-type">string</td><td>Custom canonical URL</td></tr>
                                <tr><td class="param-name">scheduled_at</td><td class="param-type">string</td><td>ISO 8601 datetime for scheduled publishing</td></tr>
                                <tr><td class="param-name">category_ids</td><td class="param-type">array</td><td>Array of category IDs</td></tr>
                                <tr><td class="param-name">tag_ids</td><td class="param-type">array</td><td>Array of tag IDs</td></tr>
                            </tbody>
                        </table>

                        <div class="response-section">
                            <div class="response-title">Example Request</div>
                            <pre><code>{
    "title": "New Blog Post",
    "slug": "new-blog-post",
    "body": "&lt;p&gt;This is my new post...&lt;/p&gt;",
    "status": "draft",
    "meta_title": "New Blog Post | My Site",
    "meta_description": "A great new blog post about...",
    "category_ids": [1, 2],
    "tag_ids": [5, 8, 12]
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Update Page -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-put">PUT</span>
                        <span class="endpoint-path">/api/v1/pages/{id}</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>pages:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Update an existing page. All fields are optional - only provided fields are updated.</p>

                        <h4>Path Parameters</h4>
                        <table class="params-table">
                            <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">id <span class="param-required">required</span></td><td class="param-type">integer</td><td>Page ID</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Delete Page -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-delete">DELETE</span>
                        <span class="endpoint-path">/api/v1/pages/{id}</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>pages:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Delete a page. This action is permanent.</p>

                        <h4>Path Parameters</h4>
                        <table class="params-table">
                            <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">id <span class="param-required">required</span></td><td class="param-type">integer</td><td>Page ID</td></tr>
                            </tbody>
                        </table>

                        <div class="response-section">
                            <div class="response-title">Response</div>
                            <p>Returns <code>204 No Content</code> on success.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Media Endpoints -->
            <section id="media">
                <h2>Media</h2>
                <p>Upload and manage media files including images, documents, and other files.</p>

                <!-- List Media -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/media</span>
                        <span class="endpoint-auth"><span class="optional">Auth Optional</span></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">List media files with optional filtering.</p>

                        <h4>Query Parameters</h4>
                        <table class="params-table">
                            <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">type</td><td class="param-type">string</td><td>Filter by type: <code>image</code>, <code>document</code>, <code>video</code></td></tr>
                                <tr><td class="param-name">folder</td><td class="param-type">integer</td><td>Filter by folder ID</td></tr>
                                <tr><td class="param-name">search</td><td class="param-type">string</td><td>Search filename or alt text</td></tr>
                                <tr><td class="param-name">page</td><td class="param-type">integer</td><td>Page number (default: 1)</td></tr>
                                <tr><td class="param-name">per_page</td><td class="param-type">integer</td><td>Items per page (default: 20, max: 100)</td></tr>
                                <tr><td class="param-name">include</td><td class="param-type">string</td><td>Comma-separated: <code>variants</code>, <code>folder</code></td></tr>
                            </tbody>
                        </table>

                        <div class="response-section">
                            <div class="response-title">Example Response</div>
                            <pre><code>{
    "data": [
        {
            "id": 1,
            "uuid": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "filename": "hero-image.jpg",
            "original_name": "Hero Image.jpg",
            "mime_type": "image/jpeg",
            "size": 245678,
            "width": 1920,
            "height": 1080,
            "alt": "Hero banner image",
            "caption": "Our main hero image",
            "url": "/uploads/originals/a1b2c3d4.../hero-image.jpg",
            "created_at": "2024-01-01T12:00:00Z",
            "variants": [
                {
                    "name": "thumbnail",
                    "url": "/uploads/thumbnails/a1b2c3d4.../hero-image.jpg",
                    "width": 150,
                    "height": 150
                }
            ]
        }
    ],
    "meta": {
        "total": 50,
        "page": 1,
        "per_page": 20,
        "pages": 3
    }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Get Media -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/media/{id}</span>
                        <span class="endpoint-auth"><span class="optional">Auth Optional</span></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Get a single media item by ID with all metadata and variants.</p>

                        <h4>Path Parameters</h4>
                        <table class="params-table">
                            <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">id <span class="param-required">required</span></td><td class="param-type">integer</td><td>Media ID</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Upload Media -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/api/v1/media</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>media:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Upload one or more media files. Use <code>multipart/form-data</code> encoding.</p>

                        <h4>Form Fields</h4>
                        <table class="params-table">
                            <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">file / files / files[] <span class="param-required">required</span></td><td class="param-type">file</td><td>File(s) to upload</td></tr>
                                <tr><td class="param-name">folder_id</td><td class="param-type">integer</td><td>Optional folder ID</td></tr>
                            </tbody>
                        </table>

                        <div class="response-section">
                            <div class="response-title">Example (cURL)</div>
                            <pre><code>curl -X POST {{.BaseURL}}/api/v1/media \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -F "file=@/path/to/image.jpg" \
  -F "folder_id=1"</code></pre>
                        </div>

                        <div class="response-section">
                            <div class="response-title">Batch Upload Response</div>
                            <pre><code>{
    "data": {
        "uploaded": [
            { "id": 1, "filename": "image1.jpg", ... }
        ],
        "failed": [
            { "filename": "invalid.exe", "error": "File type not allowed" }
        ],
        "total_uploaded": 1,
        "total_failed": 1
    }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Update Media -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-put">PUT</span>
                        <span class="endpoint-path">/api/v1/media/{id}</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>media:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Update media metadata (filename, alt text, caption, folder).</p>

                        <h4>Request Body</h4>
                        <table class="params-table">
                            <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">filename</td><td class="param-type">string</td><td>New filename</td></tr>
                                <tr><td class="param-name">alt</td><td class="param-type">string</td><td>Alt text for images</td></tr>
                                <tr><td class="param-name">caption</td><td class="param-type">string</td><td>Caption text</td></tr>
                                <tr><td class="param-name">folder_id</td><td class="param-type">integer</td><td>Move to folder (null for root)</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Delete Media -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-delete">DELETE</span>
                        <span class="endpoint-path">/api/v1/media/{id}</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>media:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Delete a media file and all its variants. This action is permanent.</p>
                    </div>
                </div>
            </section>

            <!-- Tags Endpoints -->
            <section id="tags">
                <h2>Tags</h2>
                <p>Manage content tags for organizing pages.</p>

                <!-- List Tags -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/tags</span>
                        <span class="endpoint-auth">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">List all tags with page counts.</p>

                        <h4>Query Parameters</h4>
                        <table class="params-table">
                            <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">page</td><td class="param-type">integer</td><td>Page number</td></tr>
                                <tr><td class="param-name">per_page</td><td class="param-type">integer</td><td>Items per page (max: 100)</td></tr>
                            </tbody>
                        </table>

                        <div class="response-section">
                            <div class="response-title">Example Response</div>
                            <pre><code>{
    "data": [
        {
            "id": 1,
            "name": "Technology",
            "slug": "technology",
            "language_id": 1,
            "page_count": 15,
            "created_at": "2024-01-01T12:00:00Z"
        }
    ],
    "meta": {
        "total": 10,
        "page": 1,
        "per_page": 20,
        "pages": 1
    }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Get Tag -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/tags/{id}</span>
                        <span class="endpoint-auth">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Get a single tag by ID.</p>
                    </div>
                </div>

                <!-- Create Tag -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/api/v1/tags</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>taxonomy:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Create a new tag.</p>

                        <h4>Request Body</h4>
                        <table class="params-table">
                            <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">name <span class="param-required">required</span></td><td class="param-type">string</td><td>Tag name</td></tr>
                                <tr><td class="param-name">slug <span class="param-required">required</span></td><td class="param-type">string</td><td>URL slug (must be unique)</td></tr>
                                <tr><td class="param-name">language_id</td><td class="param-type">integer</td><td>Language ID (defaults to system default language)</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Update Tag -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-put">PUT</span>
                        <span class="endpoint-path">/api/v1/tags/{id}</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>taxonomy:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Update an existing tag.</p>
                    </div>
                </div>

                <!-- Delete Tag -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-delete">DELETE</span>
                        <span class="endpoint-path">/api/v1/tags/{id}</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>taxonomy:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Delete a tag. Pages tagged with this tag will have the association removed.</p>
                    </div>
                </div>
            </section>

            <!-- Categories Endpoints -->
            <section id="categories">
                <h2>Categories</h2>
                <p>Manage hierarchical content categories. Categories support nesting with parent-child relationships.</p>

                <!-- List Categories -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/categories</span>
                        <span class="endpoint-auth">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">List all categories. Returns a nested tree structure by default.</p>

                        <h4>Query Parameters</h4>
                        <table class="params-table">
                            <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">flat</td><td class="param-type">boolean</td><td>Set to <code>true</code> for a flat list instead of nested tree</td></tr>
                            </tbody>
                        </table>

                        <div class="response-section">
                            <div class="response-title">Example Response (Nested Tree)</div>
                            <pre><code>{
    "data": [
        {
            "id": 1,
            "name": "Technology",
            "slug": "technology",
            "description": "Tech-related posts",
            "parent_id": null,
            "position": 0,
            "language_id": 1,
            "page_count": 10,
            "children": [
                {
                    "id": 2,
                    "name": "Web Development",
                    "slug": "web-development",
                    "parent_id": 1,
                    "page_count": 5,
                    "children": []
                }
            ]
        }
    ]
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Get Category -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-get">GET</span>
                        <span class="endpoint-path">/api/v1/categories/{id}</span>
                        <span class="endpoint-auth">Public</span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Get a single category with its immediate children.</p>
                    </div>
                </div>

                <!-- Create Category -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-post">POST</span>
                        <span class="endpoint-path">/api/v1/categories</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>taxonomy:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Create a new category.</p>

                        <h4>Request Body</h4>
                        <table class="params-table">
                            <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
                            <tbody>
                                <tr><td class="param-name">name <span class="param-required">required</span></td><td class="param-type">string</td><td>Category name</td></tr>
                                <tr><td class="param-name">slug <span class="param-required">required</span></td><td class="param-type">string</td><td>URL slug (must be unique)</td></tr>
                                <tr><td class="param-name">description</td><td class="param-type">string</td><td>Category description</td></tr>
                                <tr><td class="param-name">parent_id</td><td class="param-type">integer</td><td>Parent category ID (null for root)</td></tr>
                                <tr><td class="param-name">position</td><td class="param-type">integer</td><td>Sort order (default: 0)</td></tr>
                                <tr><td class="param-name">language_id</td><td class="param-type">integer</td><td>Language ID (defaults to system default language)</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Update Category -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-put">PUT</span>
                        <span class="endpoint-path">/api/v1/categories/{id}</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>taxonomy:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Update an existing category. Cannot set a category as its own parent or create circular references.</p>
                    </div>
                </div>

                <!-- Delete Category -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="method method-delete">DELETE</span>
                        <span class="endpoint-path">/api/v1/categories/{id}</span>
                        <span class="endpoint-auth"><span class="required">Auth Required</span> <code>taxonomy:write</code></span>
                    </div>
                    <div class="endpoint-body">
                        <p class="endpoint-description">Delete a category. Cannot delete categories that have child categories - delete children first.</p>

                        <div class="info-box warning">
                            <div class="info-box-title">Note</div>
                            <p>Categories with children cannot be deleted. Move or delete child categories first.</p>
                        </div>
                    </div>
                </div>
            </section>

            <footer class="api-docs-footer">
                <p>Generated for {{.SiteName}} REST API v1</p>
            </footer>
        </main>
    </div>

    <script>
        // Simple smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                    // Update URL hash
                    history.pushState(null, null, this.getAttribute('href'));
                }
            });
        });

        // Highlight current section in sidebar
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    document.querySelectorAll('.nav-link').forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === '#' + entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, { rootMargin: '-20% 0px -70% 0px' });

        document.querySelectorAll('section[id]').forEach(section => {
            observer.observe(section);
        });
    </script>
</body>
</html>
