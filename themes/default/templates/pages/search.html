{{define "content"}}
<div class="search-page">
    <header class="search-header">
        <h1 class="search-title">{{TTheme .LangCode "search.title"}}</h1>
        <form action="/search" method="get" class="search-form large">
            <input type="search" name="q" value="{{.SearchQuery}}" placeholder="{{TTheme .LangCode "search.placeholder"}}" autofocus>
            <button type="submit" class="btn btn-primary">{{TTheme .LangCode "search.button"}}</button>
        </form>
    </header>

    {{if .SearchQuery}}
    <div class="search-results">
        {{if .Pages}}
        <p class="results-count">
            {{if eq .ResultCount 1}}{{TTheme .LangCode "search.result_count" .ResultCount}}{{else}}{{TTheme .LangCode "search.results_count" .ResultCount}}{{end}} "{{.SearchQuery}}"
        </p>

        <div class="posts-list">
            {{range .Pages}}
            <article class="post-item search-result">
                {{if .FeaturedImage}}
                <div class="post-thumbnail">
                    <a href="{{.URL}}">
                        <img src="{{.FeaturedImage}}" alt="{{.Title}}">
                    </a>
                </div>
                {{end}}
                <div class="post-content">
                    {{if .Category}}
                    <span class="post-category">
                        <a href="/category/{{.Category.Slug}}">{{.Category.Name}}</a>
                    </span>
                    {{end}}
                    <h2 class="post-title">
                        <a href="{{.URL}}">{{.Title}}</a>
                    </h2>
                    {{if .Highlight}}
                    <p class="search-highlight">{{safeHTML .Highlight}}</p>
                    {{else if .Excerpt}}
                    <p class="post-excerpt">{{.Excerpt}}</p>
                    {{end}}
                    <div class="post-meta">
                        {{if .PublishedAt}}
                        <time datetime="{{.PublishedAt}}">{{formatDateLocale .PublishedAt $.LangCode}}</time>
                        {{end}}
                        <span class="post-type">{{.Type}}</span>
                    </div>
                </div>
            </article>
            {{end}}
        </div>

        {{template "pagination.html" .}}

        {{else}}
        <div class="no-results">
            <p>{{TTheme $.LangCode "search.no_results"}} "{{.SearchQuery}}"</p>
            <div class="search-suggestions">
                <h3>{{TTheme $.LangCode "search.suggestions_title"}}</h3>
                <ul>
                    <li>{{TTheme $.LangCode "search.suggestion_spelling"}}</li>
                    <li>{{TTheme $.LangCode "search.suggestion_keywords"}}</li>
                    <li>{{TTheme $.LangCode "search.suggestion_general"}}</li>
                </ul>
            </div>
        </div>
        {{end}}
    </div>
    {{else}}
    <div class="search-intro">
        <p>{{TTheme .LangCode "search.intro"}}</p>

        {{if .PopularSearches}}
        <div class="popular-searches">
            <h3>{{TTheme .LangCode "search.popular_title"}}</h3>
            <ul>
                {{range .PopularSearches}}
                <li><a href="/search?q={{.}}">{{.}}</a></li>
                {{end}}
            </ul>
        </div>
        {{end}}
    </div>
    {{end}}
</div>
{{end}}
