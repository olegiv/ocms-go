<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    {{/* SEO Meta Tags */}}
    {{if .MetaDescription}}<meta name="description" content="{{.MetaDescription}}">{{end}}
    {{if .MetaKeywords}}<meta name="keywords" content="{{.MetaKeywords}}">{{end}}
    {{if .Canonical}}<link rel="canonical" href="{{.Canonical}}">{{end}}
    {{if .Robots}}<meta name="robots" content="{{.Robots}}">{{end}}

    {{/* Open Graph */}}
    <meta property="og:type" content="{{if .OGType}}{{.OGType}}{{else if .Page}}article{{else}}website{{end}}">
    <meta property="og:title" content="{{if .Title}}{{.Title}}{{else}}{{.SiteName}}{{end}}">
    {{if .MetaDescription}}<meta property="og:description" content="{{.MetaDescription}}">{{end}}
    {{if .SiteURL}}<meta property="og:url" content="{{.SiteURL}}{{.RequestURI}}">{{end}}
    {{if .OGImage}}<meta property="og:image" content="{{.OGImage}}">{{else if .FeaturedImage}}<meta property="og:image" content="{{.FeaturedImage}}">{{end}}
    <meta property="og:site_name" content="{{.SiteName}}">

    {{/* Twitter Card */}}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{if .Title}}{{.Title}}{{else}}{{.SiteName}}{{end}}">
    {{if .MetaDescription}}<meta name="twitter:description" content="{{.MetaDescription}}">{{end}}
    {{if .OGImage}}<meta name="twitter:image" content="{{.OGImage}}">{{else if .FeaturedImage}}<meta name="twitter:image" content="{{.FeaturedImage}}">{{end}}

    {{/* JSON-LD Structured Data */}}
    {{if .JSONLD}}
    <script type="application/ld+json">
{{.JSONLD}}
    </script>
    {{end}}

    <title>{{if .Title}}{{.Title}} - {{end}}{{.SiteName}}</title>

    {{/* Favicon */}}
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    {{/* Theme Styles */}}
    <link rel="stylesheet" href="/themes/default/static/css/theme.css">

    {{/* Theme Settings CSS Variables */}}
    {{if .ThemeSettings}}
    <style>
        :root {
            {{if index .ThemeSettings "primary_color"}}--primary-color: {{index .ThemeSettings "primary_color"}};{{end}}
            {{if index .ThemeSettings "primary_color"}}--link-color: {{index .ThemeSettings "primary_color"}};{{end}}
        }
    </style>
    {{end}}

    {{/* Custom CSS */}}
    {{if .CustomCSS}}
    <style>{{.CustomCSS | safeHTML}}</style>
    {{end}}

    {{/* Additional head content */}}
    {{block "head" .}}{{end}}
</head>
<body class="{{if .BodyClass}}{{.BodyClass}}{{end}}">
    {{template "header.html" .}}

    <main class="site-main">
        <div class="container">
            {{if .ShowSidebar}}
            <div class="content-wrapper with-sidebar">
                <div class="content-main">
                    {{template "content" .}}
                </div>
                <aside class="content-sidebar">
                    {{template "sidebar.html" .}}
                </aside>
            </div>
            {{else}}
            <div class="content-wrapper">
                <div class="content-main full-width">
                    {{template "content" .}}
                </div>
            </div>
            {{end}}
        </div>
    </main>

    {{template "footer.html" .}}

    {{/* Theme Scripts */}}
    <script src="/themes/default/static/js/theme.js"></script>

    {{/* Additional scripts */}}
    {{block "scripts" .}}{{end}}
</body>
</html>
