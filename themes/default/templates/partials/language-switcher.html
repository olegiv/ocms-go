{{/* Language Switcher Partial - displays available language options */}}
{{if .ShowLanguagePicker}}
<div class="language-switcher">
    <div class="language-current">
        {{if .CurrentLanguage}}
        <span class="current-lang" title="{{.CurrentLanguage.Name}}">
            {{.CurrentLanguage.Code | upper}}
        </span>
        {{end}}
        <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">
            <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>
    <ul class="language-dropdown">
        {{if .Translations}}
        {{/* Page-specific translations */}}
        {{range .Translations}}
        <li class="{{if .Language.IsCurrent}}active{{end}} {{if not .HasPage}}no-translation{{end}}">
            <a href="{{.URL}}" {{if .Language.Direction}}dir="{{.Language.Direction}}"{{end}} title="{{if .HasPage}}{{.PageTitle}}{{else}}{{.Language.Name}}{{end}}">
                <span class="lang-code">{{.Language.Code | upper}}</span>
                <span class="lang-name">{{.Language.NativeName}}</span>
                {{if not .HasPage}}<span class="no-translation-marker">(no translation)</span>{{end}}
            </a>
        </li>
        {{end}}
        {{else}}
        {{/* Fallback to language list without page-specific translations */}}
        {{range .Languages}}
        <li class="{{if .IsCurrent}}active{{end}}">
            <a href="{{if .IsDefault}}/{{else}}/{{.Code}}/{{end}}" {{if .Direction}}dir="{{.Direction}}"{{end}} title="{{.Name}}">
                <span class="lang-code">{{.Code | upper}}</span>
                <span class="lang-name">{{.NativeName}}</span>
            </a>
        </li>
        {{end}}
        {{end}}
    </ul>
</div>
{{end}}
