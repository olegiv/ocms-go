<header class="dev-header">
    <div class="dev-container">
        <div class="dev-header-inner">
            <a href="/" class="dev-logo">
                <span class="dev-logo-bracket">{</span>
                <span class="dev-logo-text">{{.SiteName}}</span>
                <span class="dev-logo-bracket">}</span>
            </a>

            <button class="dev-menu-toggle" id="menu-toggle" aria-label="Toggle menu">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>

            <nav class="dev-nav" id="main-nav" aria-label="Main navigation">
                {{if .Navigation}}
                <ul class="dev-nav-list" role="menubar">
                    {{range .Navigation}}
                    {{/* Level 1 - Top nav items */}}
                    <li class="dev-nav-item{{if .IsActive}} active{{end}}{{if .Children}} has-children{{end}}" role="none">
                        <a href="{{.URL}}" class="dev-nav-link" role="menuitem" title="{{.Title}}" {{if eq .Target "_blank"}}target="_blank" rel="noopener"{{end}}{{if .Children}} aria-haspopup="true" aria-expanded="false"{{end}}>
                            <span>{{.Title}}</span>
                            {{if .Children}}
                            <svg class="dev-nav-chevron" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                            {{end}}
                        </a>
                        {{if .Children}}
                        <ul class="dev-sub-menu" role="menu">
                            {{range .Children}}
                            {{/* Level 2 - First dropdown */}}
                            <li class="dev-nav-item{{if .IsActive}} active{{end}}{{if .Children}} has-children{{end}}" role="none">
                                <a href="{{.URL}}" class="dev-nav-link" role="menuitem" title="{{.Title}}" {{if eq .Target "_blank"}}target="_blank" rel="noopener"{{end}}{{if .Children}} aria-haspopup="true" aria-expanded="false"{{end}}>
                                    <span>{{.Title}}</span>
                                    {{if .Children}}
                                    <svg class="dev-nav-chevron" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="9 6 15 12 9 18"></polyline>
                                    </svg>
                                    {{end}}
                                </a>
                                {{if .Children}}
                                <ul class="dev-sub-menu" role="menu">
                                    {{range .Children}}
                                    {{/* Level 3 - Flyout submenu */}}
                                    <li class="dev-nav-item{{if .IsActive}} active{{end}}" role="none">
                                        <a href="{{.URL}}" class="dev-nav-link" role="menuitem" title="{{.Title}}" {{if eq .Target "_blank"}}target="_blank" rel="noopener"{{end}}>
                                            <span>{{.Title}}</span>
                                        </a>
                                    </li>
                                    {{end}}
                                </ul>
                                {{end}}
                            </li>
                            {{end}}
                        </ul>
                        {{end}}
                    </li>
                    {{end}}
                </ul>
                {{end}}

                {{if .ShowSearch}}
                <form action="{{.LangPrefix}}/search" method="GET" class="dev-search">
                    <input type="text" name="q" placeholder="{{TTheme .LangCode "search.placeholder"}}" class="dev-search-input" aria-label="{{TTheme .LangCode "search.title"}}" value="{{.SearchQuery}}">
                    <button type="submit" class="dev-search-btn" aria-label="Submit search">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </button>
                </form>
                {{end}}

                {{template "language-switcher.html" .}}
            </nav>
        </div>
    </div>
</header>
