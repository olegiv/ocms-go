# Claude Code Extensions for oCMS

This directory contains specialized AI agents and slash commands tailored for oCMS development.

## Directory Structure

```
.claude/
├── agents/              # Specialized AI agents for complex tasks
│   ├── test-runner.md
│   ├── db-manager.md
│   ├── api-developer.md
│   ├── module-developer.md
│   └── security-auditor.md
├── commands/            # Quick slash commands for common workflows
│   ├── test.md
│   ├── build.md
│   ├── migrate.md
│   ├── sqlc-generate.md
│   ├── dev-server.md
│   ├── api-test.md
│   ├── security-scan.md
│   └── clean.md
└── settings.local.json  # Local settings (gitignored)
```

## Agents

Agents are specialized AI assistants for complex, multi-step tasks.

### test-runner
Runs Go tests, debugs failures, and adds test coverage.
- Handles test execution with proper environment setup
- Analyzes test failures and suggests fixes
- Creates new test cases following project patterns

### db-manager
Manages database migrations (goose) and SQLC code generation.
- Creates and applies database migrations
- Regenerates SQLC Go code from SQL queries
- Maintains database schema consistency

### api-developer
Develops and tests REST API endpoints.
- Creates new API endpoints with authentication
- Tests API functionality with real HTTP requests
- Debugs API issues and validates responses

### module-developer
Creates and manages the module system.
- Builds new modules with proper structure
- Implements module hooks and lifecycle
- Adds i18n translations for modules

### security-auditor
Scans for vulnerabilities and ensures security best practices.
- Runs govulncheck for dependency vulnerabilities
- Reviews security configurations (CSRF, auth, rate limiting)
- Creates audit reports in .audit/ directory

## Commands

Commands are quick, predefined workflows for common tasks.

### /test
Run all tests with coverage reporting.

### /build
Build production binary with asset compilation.

### /migrate
Check and apply database migrations.

### /sqlc-generate
Regenerate SQLC code from SQL queries.

### /dev-server
Start development server with hot reload.

### /api-test
Test API endpoints with curl requests.

### /security-scan
Scan for security vulnerabilities.

### /clean
Clean build artifacts and temp files.

## Usage

### Using Agents

Invoke agents with `@agent-name` followed by your task:

```
@test-runner Run all tests and report any failures

@db-manager Create a migration to add a comments table

@api-developer Add a new endpoint for user statistics

@module-developer Create a notification module with email hooks

@security-auditor Scan for vulnerabilities and create audit report
```

### Using Commands

Invoke commands with `/command-name`:

```
/test

/build

/migrate

/sqlc-generate

/dev-server

/api-test

/security-scan

/clean
```

## When to Use Which

**Use Agents when:**
- Task is complex and multi-step
- Need specialized knowledge (testing, security, APIs, etc.)
- Want detailed analysis and recommendations
- Building new features or debugging issues

**Use Commands when:**
- Task is straightforward and common
- Want quick execution of predefined workflow
- Running standard development operations
- Need consistent, repeatable results

## Examples

### Testing Workflow
```
# Quick test run
/test

# Detailed test analysis with debugging
@test-runner Debug why the cache tests are failing
```

### Database Workflow
```
# Quick migration apply
/migrate

# Create new migration with proper structure
@db-manager Create a migration for a webhooks table with proper indexes
```

### API Development
```
# Quick API test
/api-test

# Build new API endpoint
@api-developer Add a POST endpoint for creating comments with validation
```

### Security Audit
```
# Quick vulnerability scan
/security-scan

# Comprehensive security review
@security-auditor Review all authentication flows and check for vulnerabilities
```

## Customization

You can create additional agents and commands by adding markdown files to the respective directories:

**Agent format** (`.claude/agents/my-agent.md`):
```markdown
---
name: my-agent
description: What this agent does and when to use it. Include examples.
model: sonnet
---

[Agent instructions and context]
```

**Command format** (`.claude/commands/my-command.md`):
```markdown
[Command description and steps to execute]
```

## Documentation

Full documentation for Claude Code extensions is in `/Users/olegiv/Desktop/Projects/Go/ocms-go/CLAUDE.md`

## Generated By

These extensions were automatically generated by analyzing the oCMS project's:
- Tech stack (Go 1.25.5, chi router, SQLC, goose, SQLite)
- Build tools (Make, SCSS compilation, go test)
- Development workflows (testing, migrations, API development)
- Module system architecture
- Security requirements

They are tailored specifically for oCMS development patterns and best practices.
