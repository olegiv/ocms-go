{{define "header.html"}}
<header class="st-header" id="site-header">
    <div class="st-container">
        <div class="st-header__inner">
            <div class="st-header__brand">
                {{if .SiteLogo}}
                <a href="/" class="st-header__logo">
                    <img src="{{.SiteLogo}}" alt="{{.SiteName}}">
                </a>
                {{else}}
                <a href="/" class="st-header__title">{{.SiteName}}</a>
                {{end}}
                {{if .SiteTagline}}
                <p class="st-header__tagline">{{.SiteTagline}}</p>
                {{end}}
            </div>

            <button class="st-header__toggle" id="menu-toggle" aria-label="Toggle menu" aria-expanded="false" aria-controls="main-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>

            <nav class="st-nav" id="main-nav" aria-label="Main navigation">
                <ul class="st-nav__list" role="menubar">
                    {{range .Navigation}}
                    {{/* Level 1 */}}
                    <li class="st-nav__item{{if .IsActive}} st-nav__item--active{{end}}{{if .Children}} st-nav__item--parent{{end}}">
                        <a href="{{.URL}}" title="{{.Title}}"{{if and .Target (ne .Target "_self")}} target="{{.Target}}" rel="noopener noreferrer"{{end}}>
                            {{.Title}}
                            {{if .Children}}
                            <svg class="st-nav__chevron" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                            {{end}}
                        </a>
                        {{if .Children}}
                        <ul class="st-nav__sub" role="menu">
                            {{range .Children}}
                            {{/* Level 2 */}}
                            <li class="st-nav__item{{if .IsActive}} st-nav__item--active{{end}}{{if .Children}} st-nav__item--parent{{end}}">
                                <a href="{{.URL}}" title="{{.Title}}"{{if and .Target (ne .Target "_self")}} target="{{.Target}}" rel="noopener noreferrer"{{end}}>
                                    {{.Title}}
                                    {{if .Children}}
                                    <svg class="st-nav__chevron" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                                    {{end}}
                                </a>
                                {{if .Children}}
                                <ul class="st-nav__sub" role="menu">
                                    {{range .Children}}
                                    {{/* Level 3 */}}
                                    <li class="st-nav__item{{if .IsActive}} st-nav__item--active{{end}}">
                                        <a href="{{.URL}}" title="{{.Title}}"{{if and .Target (ne .Target "_self")}} target="{{.Target}}" rel="noopener noreferrer"{{end}}>{{.Title}}</a>
                                    </li>
                                    {{end}}
                                </ul>
                                {{end}}
                            </li>
                            {{end}}
                        </ul>
                        {{end}}
                    </li>
                    {{end}}
                </ul>
            </nav>

            <div class="st-header__actions">
                {{if .ShowSearch}}
                <div class="st-search-toggle">
                    <button class="st-search-toggle__btn" aria-label="{{TTheme .LangCode "search.title"}}" aria-expanded="false">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    </button>
                    <form action="{{.LangPrefix}}/search" method="get" class="st-search-form" role="search">
                        <input type="search" name="q" placeholder="{{TTheme .LangCode "search.placeholder"}}" aria-label="{{TTheme .LangCode "search.title"}}" value="{{.SearchQuery}}">
                        <button type="submit" aria-label="{{TTheme .LangCode "search.button"}}">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                        </button>
                    </form>
                </div>
                {{end}}

                {{template "language-switcher.html" .}}
            </div>
        </div>
    </div>
</header>
{{end}}
