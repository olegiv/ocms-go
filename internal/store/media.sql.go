// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.26.0
// source: media.sql

package store

import (
	"context"
	"database/sql"
	"time"
)

const countMedia = `-- name: CountMedia :one
SELECT COUNT(*) FROM media
`

func (q *Queries) CountMedia(ctx context.Context) (int64, error) {
	row := q.db.QueryRowContext(ctx, countMedia)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countMediaByType = `-- name: CountMediaByType :one
SELECT COUNT(*) FROM media WHERE mime_type LIKE ?
`

func (q *Queries) CountMediaByType(ctx context.Context, mimeType string) (int64, error) {
	row := q.db.QueryRowContext(ctx, countMediaByType, mimeType)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countMediaFolders = `-- name: CountMediaFolders :one
SELECT COUNT(*) FROM media_folders
`

func (q *Queries) CountMediaFolders(ctx context.Context) (int64, error) {
	row := q.db.QueryRowContext(ctx, countMediaFolders)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countMediaInFolder = `-- name: CountMediaInFolder :one
SELECT COUNT(*) FROM media WHERE folder_id = ?
`

func (q *Queries) CountMediaInFolder(ctx context.Context, folderID sql.NullInt64) (int64, error) {
	row := q.db.QueryRowContext(ctx, countMediaInFolder, folderID)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countMediaInRootFolder = `-- name: CountMediaInRootFolder :one
SELECT COUNT(*) FROM media WHERE folder_id IS NULL
`

func (q *Queries) CountMediaInRootFolder(ctx context.Context) (int64, error) {
	row := q.db.QueryRowContext(ctx, countMediaInRootFolder)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const createMedia = `-- name: CreateMedia :one
INSERT INTO media (uuid, filename, mime_type, size, width, height, alt, caption, folder_id, uploaded_by, language_code, created_at, updated_at)
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
RETURNING id, uuid, filename, mime_type, size, width, height, alt, caption, folder_id, uploaded_by, language_code, created_at, updated_at
`

type CreateMediaParams struct {
	Uuid         string         `json:"uuid"`
	Filename     string         `json:"filename"`
	MimeType     string         `json:"mime_type"`
	Size         int64          `json:"size"`
	Width        sql.NullInt64  `json:"width"`
	Height       sql.NullInt64  `json:"height"`
	Alt          sql.NullString `json:"alt"`
	Caption      sql.NullString `json:"caption"`
	FolderID     sql.NullInt64  `json:"folder_id"`
	UploadedBy   int64          `json:"uploaded_by"`
	LanguageCode string         `json:"language_code"`
	CreatedAt    time.Time      `json:"created_at"`
	UpdatedAt    time.Time      `json:"updated_at"`
}

func (q *Queries) CreateMedia(ctx context.Context, arg CreateMediaParams) (Medium, error) {
	row := q.db.QueryRowContext(ctx, createMedia,
		arg.Uuid,
		arg.Filename,
		arg.MimeType,
		arg.Size,
		arg.Width,
		arg.Height,
		arg.Alt,
		arg.Caption,
		arg.FolderID,
		arg.UploadedBy,
		arg.LanguageCode,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	var i Medium
	err := row.Scan(
		&i.ID,
		&i.Uuid,
		&i.Filename,
		&i.MimeType,
		&i.Size,
		&i.Width,
		&i.Height,
		&i.Alt,
		&i.Caption,
		&i.FolderID,
		&i.UploadedBy,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const createMediaFolder = `-- name: CreateMediaFolder :one
INSERT INTO media_folders (name, parent_id, position, created_at)
VALUES (?, ?, ?, ?)
RETURNING id, name, parent_id, position, created_at
`

type CreateMediaFolderParams struct {
	Name      string        `json:"name"`
	ParentID  sql.NullInt64 `json:"parent_id"`
	Position  int64         `json:"position"`
	CreatedAt time.Time     `json:"created_at"`
}

func (q *Queries) CreateMediaFolder(ctx context.Context, arg CreateMediaFolderParams) (MediaFolder, error) {
	row := q.db.QueryRowContext(ctx, createMediaFolder,
		arg.Name,
		arg.ParentID,
		arg.Position,
		arg.CreatedAt,
	)
	var i MediaFolder
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.ParentID,
		&i.Position,
		&i.CreatedAt,
	)
	return i, err
}

const createMediaVariant = `-- name: CreateMediaVariant :one
INSERT INTO media_variants (media_id, type, width, height, size, created_at)
VALUES (?, ?, ?, ?, ?, ?)
RETURNING id, media_id, type, width, height, size, created_at
`

type CreateMediaVariantParams struct {
	MediaID   int64     `json:"media_id"`
	Type      string    `json:"type"`
	Width     int64     `json:"width"`
	Height    int64     `json:"height"`
	Size      int64     `json:"size"`
	CreatedAt time.Time `json:"created_at"`
}

func (q *Queries) CreateMediaVariant(ctx context.Context, arg CreateMediaVariantParams) (MediaVariant, error) {
	row := q.db.QueryRowContext(ctx, createMediaVariant,
		arg.MediaID,
		arg.Type,
		arg.Width,
		arg.Height,
		arg.Size,
		arg.CreatedAt,
	)
	var i MediaVariant
	err := row.Scan(
		&i.ID,
		&i.MediaID,
		&i.Type,
		&i.Width,
		&i.Height,
		&i.Size,
		&i.CreatedAt,
	)
	return i, err
}

const deleteAllMediaTranslations = `-- name: DeleteAllMediaTranslations :exec
DELETE FROM media_translations WHERE media_id = ?
`

func (q *Queries) DeleteAllMediaTranslations(ctx context.Context, mediaID int64) error {
	_, err := q.db.ExecContext(ctx, deleteAllMediaTranslations, mediaID)
	return err
}

const deleteMedia = `-- name: DeleteMedia :exec
DELETE FROM media WHERE id = ?
`

func (q *Queries) DeleteMedia(ctx context.Context, id int64) error {
	_, err := q.db.ExecContext(ctx, deleteMedia, id)
	return err
}

const deleteMediaFolder = `-- name: DeleteMediaFolder :exec
DELETE FROM media_folders WHERE id = ?
`

func (q *Queries) DeleteMediaFolder(ctx context.Context, id int64) error {
	_, err := q.db.ExecContext(ctx, deleteMediaFolder, id)
	return err
}

const deleteMediaTranslation = `-- name: DeleteMediaTranslation :exec
DELETE FROM media_translations WHERE media_id = ? AND language_id = ?
`

type DeleteMediaTranslationParams struct {
	MediaID    int64 `json:"media_id"`
	LanguageID int64 `json:"language_id"`
}

func (q *Queries) DeleteMediaTranslation(ctx context.Context, arg DeleteMediaTranslationParams) error {
	_, err := q.db.ExecContext(ctx, deleteMediaTranslation, arg.MediaID, arg.LanguageID)
	return err
}

const deleteMediaVariants = `-- name: DeleteMediaVariants :exec
DELETE FROM media_variants WHERE media_id = ?
`

func (q *Queries) DeleteMediaVariants(ctx context.Context, mediaID int64) error {
	_, err := q.db.ExecContext(ctx, deleteMediaVariants, mediaID)
	return err
}

const getMediaByID = `-- name: GetMediaByID :one
SELECT id, uuid, filename, mime_type, size, width, height, alt, caption, folder_id, uploaded_by, language_code, created_at, updated_at FROM media WHERE id = ?
`

func (q *Queries) GetMediaByID(ctx context.Context, id int64) (Medium, error) {
	row := q.db.QueryRowContext(ctx, getMediaByID, id)
	var i Medium
	err := row.Scan(
		&i.ID,
		&i.Uuid,
		&i.Filename,
		&i.MimeType,
		&i.Size,
		&i.Width,
		&i.Height,
		&i.Alt,
		&i.Caption,
		&i.FolderID,
		&i.UploadedBy,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getMediaByUUID = `-- name: GetMediaByUUID :one
SELECT id, uuid, filename, mime_type, size, width, height, alt, caption, folder_id, uploaded_by, language_code, created_at, updated_at FROM media WHERE uuid = ?
`

func (q *Queries) GetMediaByUUID(ctx context.Context, uuid string) (Medium, error) {
	row := q.db.QueryRowContext(ctx, getMediaByUUID, uuid)
	var i Medium
	err := row.Scan(
		&i.ID,
		&i.Uuid,
		&i.Filename,
		&i.MimeType,
		&i.Size,
		&i.Width,
		&i.Height,
		&i.Alt,
		&i.Caption,
		&i.FolderID,
		&i.UploadedBy,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getMediaFolderByID = `-- name: GetMediaFolderByID :one
SELECT id, name, parent_id, position, created_at FROM media_folders WHERE id = ?
`

func (q *Queries) GetMediaFolderByID(ctx context.Context, id int64) (MediaFolder, error) {
	row := q.db.QueryRowContext(ctx, getMediaFolderByID, id)
	var i MediaFolder
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.ParentID,
		&i.Position,
		&i.CreatedAt,
	)
	return i, err
}

const getMediaTranslation = `-- name: GetMediaTranslation :one

SELECT id, media_id, language_id, alt, caption, created_at, updated_at FROM media_translations
WHERE media_id = ? AND language_id = ?
`

type GetMediaTranslationParams struct {
	MediaID    int64 `json:"media_id"`
	LanguageID int64 `json:"language_id"`
}

// Media Translations (uses language_id as FK to languages table)
func (q *Queries) GetMediaTranslation(ctx context.Context, arg GetMediaTranslationParams) (MediaTranslation, error) {
	row := q.db.QueryRowContext(ctx, getMediaTranslation, arg.MediaID, arg.LanguageID)
	var i MediaTranslation
	err := row.Scan(
		&i.ID,
		&i.MediaID,
		&i.LanguageID,
		&i.Alt,
		&i.Caption,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getMediaTranslations = `-- name: GetMediaTranslations :many
SELECT mt.id, mt.media_id, mt.language_id, mt.alt, mt.caption, mt.created_at, mt.updated_at, l.code as language_code, l.name as language_name
FROM media_translations mt
JOIN languages l ON l.id = mt.language_id
WHERE mt.media_id = ?
ORDER BY l.position
`

type GetMediaTranslationsRow struct {
	ID           int64        `json:"id"`
	MediaID      int64        `json:"media_id"`
	LanguageID   int64        `json:"language_id"`
	Alt          string       `json:"alt"`
	Caption      string       `json:"caption"`
	CreatedAt    sql.NullTime `json:"created_at"`
	UpdatedAt    sql.NullTime `json:"updated_at"`
	LanguageCode string       `json:"language_code"`
	LanguageName string       `json:"language_name"`
}

func (q *Queries) GetMediaTranslations(ctx context.Context, mediaID int64) ([]GetMediaTranslationsRow, error) {
	rows, err := q.db.QueryContext(ctx, getMediaTranslations, mediaID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetMediaTranslationsRow{}
	for rows.Next() {
		var i GetMediaTranslationsRow
		if err := rows.Scan(
			&i.ID,
			&i.MediaID,
			&i.LanguageID,
			&i.Alt,
			&i.Caption,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.LanguageCode,
			&i.LanguageName,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getMediaVariant = `-- name: GetMediaVariant :one
SELECT id, media_id, type, width, height, size, created_at FROM media_variants WHERE media_id = ? AND type = ?
`

type GetMediaVariantParams struct {
	MediaID int64  `json:"media_id"`
	Type    string `json:"type"`
}

func (q *Queries) GetMediaVariant(ctx context.Context, arg GetMediaVariantParams) (MediaVariant, error) {
	row := q.db.QueryRowContext(ctx, getMediaVariant, arg.MediaID, arg.Type)
	var i MediaVariant
	err := row.Scan(
		&i.ID,
		&i.MediaID,
		&i.Type,
		&i.Width,
		&i.Height,
		&i.Size,
		&i.CreatedAt,
	)
	return i, err
}

const getMediaVariants = `-- name: GetMediaVariants :many
SELECT id, media_id, type, width, height, size, created_at FROM media_variants WHERE media_id = ?
`

func (q *Queries) GetMediaVariants(ctx context.Context, mediaID int64) ([]MediaVariant, error) {
	rows, err := q.db.QueryContext(ctx, getMediaVariants, mediaID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []MediaVariant{}
	for rows.Next() {
		var i MediaVariant
		if err := rows.Scan(
			&i.ID,
			&i.MediaID,
			&i.Type,
			&i.Width,
			&i.Height,
			&i.Size,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getRecentMedia = `-- name: GetRecentMedia :many
SELECT id, uuid, filename, mime_type, size, width, height, alt, caption, folder_id, uploaded_by, language_code, created_at, updated_at FROM media ORDER BY created_at DESC LIMIT ?
`

func (q *Queries) GetRecentMedia(ctx context.Context, limit int64) ([]Medium, error) {
	rows, err := q.db.QueryContext(ctx, getRecentMedia, limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Medium{}
	for rows.Next() {
		var i Medium
		if err := rows.Scan(
			&i.ID,
			&i.Uuid,
			&i.Filename,
			&i.MimeType,
			&i.Size,
			&i.Width,
			&i.Height,
			&i.Alt,
			&i.Caption,
			&i.FolderID,
			&i.UploadedBy,
			&i.LanguageCode,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listChildMediaFolders = `-- name: ListChildMediaFolders :many
SELECT id, name, parent_id, position, created_at FROM media_folders WHERE parent_id = ? ORDER BY position, name
`

func (q *Queries) ListChildMediaFolders(ctx context.Context, parentID sql.NullInt64) ([]MediaFolder, error) {
	rows, err := q.db.QueryContext(ctx, listChildMediaFolders, parentID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []MediaFolder{}
	for rows.Next() {
		var i MediaFolder
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.ParentID,
			&i.Position,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listMedia = `-- name: ListMedia :many
SELECT id, uuid, filename, mime_type, size, width, height, alt, caption, folder_id, uploaded_by, language_code, created_at, updated_at FROM media ORDER BY created_at DESC LIMIT ? OFFSET ?
`

type ListMediaParams struct {
	Limit  int64 `json:"limit"`
	Offset int64 `json:"offset"`
}

func (q *Queries) ListMedia(ctx context.Context, arg ListMediaParams) ([]Medium, error) {
	rows, err := q.db.QueryContext(ctx, listMedia, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Medium{}
	for rows.Next() {
		var i Medium
		if err := rows.Scan(
			&i.ID,
			&i.Uuid,
			&i.Filename,
			&i.MimeType,
			&i.Size,
			&i.Width,
			&i.Height,
			&i.Alt,
			&i.Caption,
			&i.FolderID,
			&i.UploadedBy,
			&i.LanguageCode,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listMediaByType = `-- name: ListMediaByType :many
SELECT id, uuid, filename, mime_type, size, width, height, alt, caption, folder_id, uploaded_by, language_code, created_at, updated_at FROM media WHERE mime_type LIKE ? ORDER BY created_at DESC LIMIT ? OFFSET ?
`

type ListMediaByTypeParams struct {
	MimeType string `json:"mime_type"`
	Limit    int64  `json:"limit"`
	Offset   int64  `json:"offset"`
}

func (q *Queries) ListMediaByType(ctx context.Context, arg ListMediaByTypeParams) ([]Medium, error) {
	rows, err := q.db.QueryContext(ctx, listMediaByType, arg.MimeType, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Medium{}
	for rows.Next() {
		var i Medium
		if err := rows.Scan(
			&i.ID,
			&i.Uuid,
			&i.Filename,
			&i.MimeType,
			&i.Size,
			&i.Width,
			&i.Height,
			&i.Alt,
			&i.Caption,
			&i.FolderID,
			&i.UploadedBy,
			&i.LanguageCode,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listMediaFolders = `-- name: ListMediaFolders :many
SELECT id, name, parent_id, position, created_at FROM media_folders ORDER BY position, name
`

func (q *Queries) ListMediaFolders(ctx context.Context) ([]MediaFolder, error) {
	rows, err := q.db.QueryContext(ctx, listMediaFolders)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []MediaFolder{}
	for rows.Next() {
		var i MediaFolder
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.ParentID,
			&i.Position,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listMediaInFolder = `-- name: ListMediaInFolder :many
SELECT id, uuid, filename, mime_type, size, width, height, alt, caption, folder_id, uploaded_by, language_code, created_at, updated_at FROM media WHERE folder_id = ? ORDER BY created_at DESC LIMIT ? OFFSET ?
`

type ListMediaInFolderParams struct {
	FolderID sql.NullInt64 `json:"folder_id"`
	Limit    int64         `json:"limit"`
	Offset   int64         `json:"offset"`
}

func (q *Queries) ListMediaInFolder(ctx context.Context, arg ListMediaInFolderParams) ([]Medium, error) {
	rows, err := q.db.QueryContext(ctx, listMediaInFolder, arg.FolderID, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Medium{}
	for rows.Next() {
		var i Medium
		if err := rows.Scan(
			&i.ID,
			&i.Uuid,
			&i.Filename,
			&i.MimeType,
			&i.Size,
			&i.Width,
			&i.Height,
			&i.Alt,
			&i.Caption,
			&i.FolderID,
			&i.UploadedBy,
			&i.LanguageCode,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listMediaInRootFolder = `-- name: ListMediaInRootFolder :many
SELECT id, uuid, filename, mime_type, size, width, height, alt, caption, folder_id, uploaded_by, language_code, created_at, updated_at FROM media WHERE folder_id IS NULL ORDER BY created_at DESC LIMIT ? OFFSET ?
`

type ListMediaInRootFolderParams struct {
	Limit  int64 `json:"limit"`
	Offset int64 `json:"offset"`
}

func (q *Queries) ListMediaInRootFolder(ctx context.Context, arg ListMediaInRootFolderParams) ([]Medium, error) {
	rows, err := q.db.QueryContext(ctx, listMediaInRootFolder, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Medium{}
	for rows.Next() {
		var i Medium
		if err := rows.Scan(
			&i.ID,
			&i.Uuid,
			&i.Filename,
			&i.MimeType,
			&i.Size,
			&i.Width,
			&i.Height,
			&i.Alt,
			&i.Caption,
			&i.FolderID,
			&i.UploadedBy,
			&i.LanguageCode,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listRootMediaFolders = `-- name: ListRootMediaFolders :many
SELECT id, name, parent_id, position, created_at FROM media_folders WHERE parent_id IS NULL ORDER BY position, name
`

func (q *Queries) ListRootMediaFolders(ctx context.Context) ([]MediaFolder, error) {
	rows, err := q.db.QueryContext(ctx, listRootMediaFolders)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []MediaFolder{}
	for rows.Next() {
		var i MediaFolder
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.ParentID,
			&i.Position,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const moveMediaToFolder = `-- name: MoveMediaToFolder :exec
UPDATE media SET folder_id = ?, updated_at = ? WHERE id = ?
`

type MoveMediaToFolderParams struct {
	FolderID  sql.NullInt64 `json:"folder_id"`
	UpdatedAt time.Time     `json:"updated_at"`
	ID        int64         `json:"id"`
}

func (q *Queries) MoveMediaToFolder(ctx context.Context, arg MoveMediaToFolderParams) error {
	_, err := q.db.ExecContext(ctx, moveMediaToFolder, arg.FolderID, arg.UpdatedAt, arg.ID)
	return err
}

const searchMedia = `-- name: SearchMedia :many
SELECT id, uuid, filename, mime_type, size, width, height, alt, caption, folder_id, uploaded_by, language_code, created_at, updated_at FROM media WHERE filename LIKE ? OR alt LIKE ? ORDER BY created_at DESC LIMIT ?
`

type SearchMediaParams struct {
	Filename string         `json:"filename"`
	Alt      sql.NullString `json:"alt"`
	Limit    int64          `json:"limit"`
}

func (q *Queries) SearchMedia(ctx context.Context, arg SearchMediaParams) ([]Medium, error) {
	rows, err := q.db.QueryContext(ctx, searchMedia, arg.Filename, arg.Alt, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Medium{}
	for rows.Next() {
		var i Medium
		if err := rows.Scan(
			&i.ID,
			&i.Uuid,
			&i.Filename,
			&i.MimeType,
			&i.Size,
			&i.Width,
			&i.Height,
			&i.Alt,
			&i.Caption,
			&i.FolderID,
			&i.UploadedBy,
			&i.LanguageCode,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateMedia = `-- name: UpdateMedia :one
UPDATE media SET filename = ?, alt = ?, caption = ?, folder_id = ?, language_code = ?, updated_at = ?
WHERE id = ?
RETURNING id, uuid, filename, mime_type, size, width, height, alt, caption, folder_id, uploaded_by, language_code, created_at, updated_at
`

type UpdateMediaParams struct {
	Filename     string         `json:"filename"`
	Alt          sql.NullString `json:"alt"`
	Caption      sql.NullString `json:"caption"`
	FolderID     sql.NullInt64  `json:"folder_id"`
	LanguageCode string         `json:"language_code"`
	UpdatedAt    time.Time      `json:"updated_at"`
	ID           int64          `json:"id"`
}

func (q *Queries) UpdateMedia(ctx context.Context, arg UpdateMediaParams) (Medium, error) {
	row := q.db.QueryRowContext(ctx, updateMedia,
		arg.Filename,
		arg.Alt,
		arg.Caption,
		arg.FolderID,
		arg.LanguageCode,
		arg.UpdatedAt,
		arg.ID,
	)
	var i Medium
	err := row.Scan(
		&i.ID,
		&i.Uuid,
		&i.Filename,
		&i.MimeType,
		&i.Size,
		&i.Width,
		&i.Height,
		&i.Alt,
		&i.Caption,
		&i.FolderID,
		&i.UploadedBy,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const updateMediaFolder = `-- name: UpdateMediaFolder :one
UPDATE media_folders SET name = ?, parent_id = ?, position = ?
WHERE id = ?
RETURNING id, name, parent_id, position, created_at
`

type UpdateMediaFolderParams struct {
	Name     string        `json:"name"`
	ParentID sql.NullInt64 `json:"parent_id"`
	Position int64         `json:"position"`
	ID       int64         `json:"id"`
}

func (q *Queries) UpdateMediaFolder(ctx context.Context, arg UpdateMediaFolderParams) (MediaFolder, error) {
	row := q.db.QueryRowContext(ctx, updateMediaFolder,
		arg.Name,
		arg.ParentID,
		arg.Position,
		arg.ID,
	)
	var i MediaFolder
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.ParentID,
		&i.Position,
		&i.CreatedAt,
	)
	return i, err
}

const upsertMediaTranslation = `-- name: UpsertMediaTranslation :one
INSERT INTO media_translations (media_id, language_id, alt, caption, updated_at)
VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP)
ON CONFLICT(media_id, language_id)
DO UPDATE SET alt = excluded.alt, caption = excluded.caption, updated_at = CURRENT_TIMESTAMP
RETURNING id, media_id, language_id, alt, caption, created_at, updated_at
`

type UpsertMediaTranslationParams struct {
	MediaID    int64  `json:"media_id"`
	LanguageID int64  `json:"language_id"`
	Alt        string `json:"alt"`
	Caption    string `json:"caption"`
}

func (q *Queries) UpsertMediaTranslation(ctx context.Context, arg UpsertMediaTranslationParams) (MediaTranslation, error) {
	row := q.db.QueryRowContext(ctx, upsertMediaTranslation,
		arg.MediaID,
		arg.LanguageID,
		arg.Alt,
		arg.Caption,
	)
	var i MediaTranslation
	err := row.Scan(
		&i.ID,
		&i.MediaID,
		&i.LanguageID,
		&i.Alt,
		&i.Caption,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
