// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: forms.sql

package store

import (
	"context"
	"database/sql"
	"time"
)

const countAllUnreadSubmissions = `-- name: CountAllUnreadSubmissions :one
SELECT COUNT(*) FROM form_submissions WHERE is_read = 0
`

func (q *Queries) CountAllUnreadSubmissions(ctx context.Context) (int64, error) {
	row := q.db.QueryRowContext(ctx, countAllUnreadSubmissions)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countFormSubmissions = `-- name: CountFormSubmissions :one
SELECT COUNT(*) FROM form_submissions WHERE form_id = ?
`

func (q *Queries) CountFormSubmissions(ctx context.Context, formID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, countFormSubmissions, formID)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countForms = `-- name: CountForms :one
SELECT COUNT(*) FROM forms
`

func (q *Queries) CountForms(ctx context.Context) (int64, error) {
	row := q.db.QueryRowContext(ctx, countForms)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countFormsByLanguage = `-- name: CountFormsByLanguage :one
SELECT COUNT(*) FROM forms WHERE language_code = ?
`

func (q *Queries) CountFormsByLanguage(ctx context.Context, languageCode string) (int64, error) {
	row := q.db.QueryRowContext(ctx, countFormsByLanguage, languageCode)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countUnreadSubmissions = `-- name: CountUnreadSubmissions :one
SELECT COUNT(*) FROM form_submissions WHERE form_id = ? AND is_read = 0
`

func (q *Queries) CountUnreadSubmissions(ctx context.Context, formID int64) (int64, error) {
	row := q.db.QueryRowContext(ctx, countUnreadSubmissions, formID)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const createForm = `-- name: CreateForm :one
INSERT INTO forms (name, slug, title, description, success_message, email_to, is_active, language_code, created_at, updated_at)
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
RETURNING id, name, slug, title, description, success_message, email_to, is_active, language_code, created_at, updated_at
`

type CreateFormParams struct {
	Name           string         `json:"name"`
	Slug           string         `json:"slug"`
	Title          string         `json:"title"`
	Description    sql.NullString `json:"description"`
	SuccessMessage sql.NullString `json:"success_message"`
	EmailTo        sql.NullString `json:"email_to"`
	IsActive       bool           `json:"is_active"`
	LanguageCode   string         `json:"language_code"`
	CreatedAt      time.Time      `json:"created_at"`
	UpdatedAt      time.Time      `json:"updated_at"`
}

func (q *Queries) CreateForm(ctx context.Context, arg CreateFormParams) (Form, error) {
	row := q.db.QueryRowContext(ctx, createForm,
		arg.Name,
		arg.Slug,
		arg.Title,
		arg.Description,
		arg.SuccessMessage,
		arg.EmailTo,
		arg.IsActive,
		arg.LanguageCode,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	var i Form
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Slug,
		&i.Title,
		&i.Description,
		&i.SuccessMessage,
		&i.EmailTo,
		&i.IsActive,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const createFormField = `-- name: CreateFormField :one
INSERT INTO form_fields (form_id, type, name, label, placeholder, help_text, options, validation, is_required, position, language_code, created_at, updated_at)
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
RETURNING id, form_id, type, name, label, placeholder, help_text, options, validation, is_required, position, language_code, created_at, updated_at
`

type CreateFormFieldParams struct {
	FormID       int64          `json:"form_id"`
	Type         string         `json:"type"`
	Name         string         `json:"name"`
	Label        string         `json:"label"`
	Placeholder  sql.NullString `json:"placeholder"`
	HelpText     sql.NullString `json:"help_text"`
	Options      sql.NullString `json:"options"`
	Validation   sql.NullString `json:"validation"`
	IsRequired   bool           `json:"is_required"`
	Position     int64          `json:"position"`
	LanguageCode string         `json:"language_code"`
	CreatedAt    time.Time      `json:"created_at"`
	UpdatedAt    time.Time      `json:"updated_at"`
}

func (q *Queries) CreateFormField(ctx context.Context, arg CreateFormFieldParams) (FormField, error) {
	row := q.db.QueryRowContext(ctx, createFormField,
		arg.FormID,
		arg.Type,
		arg.Name,
		arg.Label,
		arg.Placeholder,
		arg.HelpText,
		arg.Options,
		arg.Validation,
		arg.IsRequired,
		arg.Position,
		arg.LanguageCode,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	var i FormField
	err := row.Scan(
		&i.ID,
		&i.FormID,
		&i.Type,
		&i.Name,
		&i.Label,
		&i.Placeholder,
		&i.HelpText,
		&i.Options,
		&i.Validation,
		&i.IsRequired,
		&i.Position,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const createFormSubmission = `-- name: CreateFormSubmission :one
INSERT INTO form_submissions (form_id, data, ip_address, user_agent, is_read, language_code, created_at)
VALUES (?, ?, ?, ?, ?, ?, ?)
RETURNING id, form_id, data, ip_address, user_agent, is_read, language_code, created_at
`

type CreateFormSubmissionParams struct {
	FormID       int64          `json:"form_id"`
	Data         string         `json:"data"`
	IpAddress    sql.NullString `json:"ip_address"`
	UserAgent    sql.NullString `json:"user_agent"`
	IsRead       bool           `json:"is_read"`
	LanguageCode string         `json:"language_code"`
	CreatedAt    time.Time      `json:"created_at"`
}

func (q *Queries) CreateFormSubmission(ctx context.Context, arg CreateFormSubmissionParams) (FormSubmission, error) {
	row := q.db.QueryRowContext(ctx, createFormSubmission,
		arg.FormID,
		arg.Data,
		arg.IpAddress,
		arg.UserAgent,
		arg.IsRead,
		arg.LanguageCode,
		arg.CreatedAt,
	)
	var i FormSubmission
	err := row.Scan(
		&i.ID,
		&i.FormID,
		&i.Data,
		&i.IpAddress,
		&i.UserAgent,
		&i.IsRead,
		&i.LanguageCode,
		&i.CreatedAt,
	)
	return i, err
}

const deleteForm = `-- name: DeleteForm :exec
DELETE FROM forms WHERE id = ?
`

func (q *Queries) DeleteForm(ctx context.Context, id int64) error {
	_, err := q.db.ExecContext(ctx, deleteForm, id)
	return err
}

const deleteFormField = `-- name: DeleteFormField :exec
DELETE FROM form_fields WHERE id = ?
`

func (q *Queries) DeleteFormField(ctx context.Context, id int64) error {
	_, err := q.db.ExecContext(ctx, deleteFormField, id)
	return err
}

const deleteFormFields = `-- name: DeleteFormFields :exec
DELETE FROM form_fields WHERE form_id = ?
`

func (q *Queries) DeleteFormFields(ctx context.Context, formID int64) error {
	_, err := q.db.ExecContext(ctx, deleteFormFields, formID)
	return err
}

const deleteFormSubmission = `-- name: DeleteFormSubmission :exec
DELETE FROM form_submissions WHERE id = ?
`

func (q *Queries) DeleteFormSubmission(ctx context.Context, id int64) error {
	_, err := q.db.ExecContext(ctx, deleteFormSubmission, id)
	return err
}

const formSlugExistsExcludingForLanguage = `-- name: FormSlugExistsExcludingForLanguage :one
SELECT EXISTS(SELECT 1 FROM forms WHERE slug = ? AND language_code = ? AND id != ?)
`

type FormSlugExistsExcludingForLanguageParams struct {
	Slug         string `json:"slug"`
	LanguageCode string `json:"language_code"`
	ID           int64  `json:"id"`
}

func (q *Queries) FormSlugExistsExcludingForLanguage(ctx context.Context, arg FormSlugExistsExcludingForLanguageParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, formSlugExistsExcludingForLanguage, arg.Slug, arg.LanguageCode, arg.ID)
	var column_1 int64
	err := row.Scan(&column_1)
	return column_1, err
}

const formSlugExistsForLanguage = `-- name: FormSlugExistsForLanguage :one
SELECT EXISTS(SELECT 1 FROM forms WHERE slug = ? AND language_code = ?)
`

type FormSlugExistsForLanguageParams struct {
	Slug         string `json:"slug"`
	LanguageCode string `json:"language_code"`
}

func (q *Queries) FormSlugExistsForLanguage(ctx context.Context, arg FormSlugExistsForLanguageParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, formSlugExistsForLanguage, arg.Slug, arg.LanguageCode)
	var column_1 int64
	err := row.Scan(&column_1)
	return column_1, err
}

const getFormByID = `-- name: GetFormByID :one
SELECT id, name, slug, title, description, success_message, email_to, is_active, language_code, created_at, updated_at FROM forms WHERE id = ?
`

func (q *Queries) GetFormByID(ctx context.Context, id int64) (Form, error) {
	row := q.db.QueryRowContext(ctx, getFormByID, id)
	var i Form
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Slug,
		&i.Title,
		&i.Description,
		&i.SuccessMessage,
		&i.EmailTo,
		&i.IsActive,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getFormBySlug = `-- name: GetFormBySlug :one
SELECT id, name, slug, title, description, success_message, email_to, is_active, language_code, created_at, updated_at FROM forms WHERE slug = ?
`

func (q *Queries) GetFormBySlug(ctx context.Context, slug string) (Form, error) {
	row := q.db.QueryRowContext(ctx, getFormBySlug, slug)
	var i Form
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Slug,
		&i.Title,
		&i.Description,
		&i.SuccessMessage,
		&i.EmailTo,
		&i.IsActive,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getFormBySlugAndLanguage = `-- name: GetFormBySlugAndLanguage :one
SELECT id, name, slug, title, description, success_message, email_to, is_active, language_code, created_at, updated_at FROM forms WHERE slug = ? AND language_code = ?
`

type GetFormBySlugAndLanguageParams struct {
	Slug         string `json:"slug"`
	LanguageCode string `json:"language_code"`
}

func (q *Queries) GetFormBySlugAndLanguage(ctx context.Context, arg GetFormBySlugAndLanguageParams) (Form, error) {
	row := q.db.QueryRowContext(ctx, getFormBySlugAndLanguage, arg.Slug, arg.LanguageCode)
	var i Form
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Slug,
		&i.Title,
		&i.Description,
		&i.SuccessMessage,
		&i.EmailTo,
		&i.IsActive,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getFormFieldByID = `-- name: GetFormFieldByID :one
SELECT id, form_id, type, name, label, placeholder, help_text, options, validation, is_required, position, language_code, created_at, updated_at FROM form_fields WHERE id = ?
`

func (q *Queries) GetFormFieldByID(ctx context.Context, id int64) (FormField, error) {
	row := q.db.QueryRowContext(ctx, getFormFieldByID, id)
	var i FormField
	err := row.Scan(
		&i.ID,
		&i.FormID,
		&i.Type,
		&i.Name,
		&i.Label,
		&i.Placeholder,
		&i.HelpText,
		&i.Options,
		&i.Validation,
		&i.IsRequired,
		&i.Position,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getFormFields = `-- name: GetFormFields :many
SELECT id, form_id, type, name, label, placeholder, help_text, options, validation, is_required, position, language_code, created_at, updated_at FROM form_fields WHERE form_id = ? ORDER BY position
`

func (q *Queries) GetFormFields(ctx context.Context, formID int64) ([]FormField, error) {
	rows, err := q.db.QueryContext(ctx, getFormFields, formID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []FormField{}
	for rows.Next() {
		var i FormField
		if err := rows.Scan(
			&i.ID,
			&i.FormID,
			&i.Type,
			&i.Name,
			&i.Label,
			&i.Placeholder,
			&i.HelpText,
			&i.Options,
			&i.Validation,
			&i.IsRequired,
			&i.Position,
			&i.LanguageCode,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getFormSubmissionByID = `-- name: GetFormSubmissionByID :one
SELECT id, form_id, data, ip_address, user_agent, is_read, language_code, created_at FROM form_submissions WHERE id = ?
`

func (q *Queries) GetFormSubmissionByID(ctx context.Context, id int64) (FormSubmission, error) {
	row := q.db.QueryRowContext(ctx, getFormSubmissionByID, id)
	var i FormSubmission
	err := row.Scan(
		&i.ID,
		&i.FormID,
		&i.Data,
		&i.IpAddress,
		&i.UserAgent,
		&i.IsRead,
		&i.LanguageCode,
		&i.CreatedAt,
	)
	return i, err
}

const getFormSubmissions = `-- name: GetFormSubmissions :many
SELECT id, form_id, data, ip_address, user_agent, is_read, language_code, created_at FROM form_submissions WHERE form_id = ? ORDER BY created_at DESC LIMIT ? OFFSET ?
`

type GetFormSubmissionsParams struct {
	FormID int64 `json:"form_id"`
	Limit  int64 `json:"limit"`
	Offset int64 `json:"offset"`
}

func (q *Queries) GetFormSubmissions(ctx context.Context, arg GetFormSubmissionsParams) ([]FormSubmission, error) {
	rows, err := q.db.QueryContext(ctx, getFormSubmissions, arg.FormID, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []FormSubmission{}
	for rows.Next() {
		var i FormSubmission
		if err := rows.Scan(
			&i.ID,
			&i.FormID,
			&i.Data,
			&i.IpAddress,
			&i.UserAgent,
			&i.IsRead,
			&i.LanguageCode,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getRecentSubmissionsWithForm = `-- name: GetRecentSubmissionsWithForm :many
SELECT
    fs.id, fs.form_id, fs.data, fs.ip_address, fs.user_agent, fs.is_read, fs.language_code, fs.created_at,
    f.name as form_name, f.slug as form_slug
FROM form_submissions fs
JOIN forms f ON f.id = fs.form_id
ORDER BY fs.created_at DESC
LIMIT ?
`

type GetRecentSubmissionsWithFormRow struct {
	ID           int64          `json:"id"`
	FormID       int64          `json:"form_id"`
	Data         string         `json:"data"`
	IpAddress    sql.NullString `json:"ip_address"`
	UserAgent    sql.NullString `json:"user_agent"`
	IsRead       bool           `json:"is_read"`
	LanguageCode string         `json:"language_code"`
	CreatedAt    time.Time      `json:"created_at"`
	FormName     string         `json:"form_name"`
	FormSlug     string         `json:"form_slug"`
}

func (q *Queries) GetRecentSubmissionsWithForm(ctx context.Context, limit int64) ([]GetRecentSubmissionsWithFormRow, error) {
	rows, err := q.db.QueryContext(ctx, getRecentSubmissionsWithForm, limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetRecentSubmissionsWithFormRow{}
	for rows.Next() {
		var i GetRecentSubmissionsWithFormRow
		if err := rows.Scan(
			&i.ID,
			&i.FormID,
			&i.Data,
			&i.IpAddress,
			&i.UserAgent,
			&i.IsRead,
			&i.LanguageCode,
			&i.CreatedAt,
			&i.FormName,
			&i.FormSlug,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listForms = `-- name: ListForms :many
SELECT id, name, slug, title, description, success_message, email_to, is_active, language_code, created_at, updated_at FROM forms ORDER BY name LIMIT ? OFFSET ?
`

type ListFormsParams struct {
	Limit  int64 `json:"limit"`
	Offset int64 `json:"offset"`
}

func (q *Queries) ListForms(ctx context.Context, arg ListFormsParams) ([]Form, error) {
	rows, err := q.db.QueryContext(ctx, listForms, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Form{}
	for rows.Next() {
		var i Form
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Slug,
			&i.Title,
			&i.Description,
			&i.SuccessMessage,
			&i.EmailTo,
			&i.IsActive,
			&i.LanguageCode,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listFormsByLanguage = `-- name: ListFormsByLanguage :many
SELECT id, name, slug, title, description, success_message, email_to, is_active, language_code, created_at, updated_at FROM forms WHERE language_code = ? ORDER BY name LIMIT ? OFFSET ?
`

type ListFormsByLanguageParams struct {
	LanguageCode string `json:"language_code"`
	Limit        int64  `json:"limit"`
	Offset       int64  `json:"offset"`
}

func (q *Queries) ListFormsByLanguage(ctx context.Context, arg ListFormsByLanguageParams) ([]Form, error) {
	rows, err := q.db.QueryContext(ctx, listFormsByLanguage, arg.LanguageCode, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Form{}
	for rows.Next() {
		var i Form
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Slug,
			&i.Title,
			&i.Description,
			&i.SuccessMessage,
			&i.EmailTo,
			&i.IsActive,
			&i.LanguageCode,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const markSubmissionRead = `-- name: MarkSubmissionRead :exec
UPDATE form_submissions SET is_read = 1 WHERE id = ?
`

func (q *Queries) MarkSubmissionRead(ctx context.Context, id int64) error {
	_, err := q.db.ExecContext(ctx, markSubmissionRead, id)
	return err
}

const updateForm = `-- name: UpdateForm :one
UPDATE forms SET name = ?, slug = ?, title = ?, description = ?, success_message = ?, email_to = ?, is_active = ?, language_code = ?, updated_at = ?
WHERE id = ?
RETURNING id, name, slug, title, description, success_message, email_to, is_active, language_code, created_at, updated_at
`

type UpdateFormParams struct {
	Name           string         `json:"name"`
	Slug           string         `json:"slug"`
	Title          string         `json:"title"`
	Description    sql.NullString `json:"description"`
	SuccessMessage sql.NullString `json:"success_message"`
	EmailTo        sql.NullString `json:"email_to"`
	IsActive       bool           `json:"is_active"`
	LanguageCode   string         `json:"language_code"`
	UpdatedAt      time.Time      `json:"updated_at"`
	ID             int64          `json:"id"`
}

func (q *Queries) UpdateForm(ctx context.Context, arg UpdateFormParams) (Form, error) {
	row := q.db.QueryRowContext(ctx, updateForm,
		arg.Name,
		arg.Slug,
		arg.Title,
		arg.Description,
		arg.SuccessMessage,
		arg.EmailTo,
		arg.IsActive,
		arg.LanguageCode,
		arg.UpdatedAt,
		arg.ID,
	)
	var i Form
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Slug,
		&i.Title,
		&i.Description,
		&i.SuccessMessage,
		&i.EmailTo,
		&i.IsActive,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const updateFormField = `-- name: UpdateFormField :one
UPDATE form_fields SET type = ?, name = ?, label = ?, placeholder = ?, help_text = ?, options = ?, validation = ?, is_required = ?, position = ?, language_code = ?, updated_at = ?
WHERE id = ?
RETURNING id, form_id, type, name, label, placeholder, help_text, options, validation, is_required, position, language_code, created_at, updated_at
`

type UpdateFormFieldParams struct {
	Type         string         `json:"type"`
	Name         string         `json:"name"`
	Label        string         `json:"label"`
	Placeholder  sql.NullString `json:"placeholder"`
	HelpText     sql.NullString `json:"help_text"`
	Options      sql.NullString `json:"options"`
	Validation   sql.NullString `json:"validation"`
	IsRequired   bool           `json:"is_required"`
	Position     int64          `json:"position"`
	LanguageCode string         `json:"language_code"`
	UpdatedAt    time.Time      `json:"updated_at"`
	ID           int64          `json:"id"`
}

func (q *Queries) UpdateFormField(ctx context.Context, arg UpdateFormFieldParams) (FormField, error) {
	row := q.db.QueryRowContext(ctx, updateFormField,
		arg.Type,
		arg.Name,
		arg.Label,
		arg.Placeholder,
		arg.HelpText,
		arg.Options,
		arg.Validation,
		arg.IsRequired,
		arg.Position,
		arg.LanguageCode,
		arg.UpdatedAt,
		arg.ID,
	)
	var i FormField
	err := row.Scan(
		&i.ID,
		&i.FormID,
		&i.Type,
		&i.Name,
		&i.Label,
		&i.Placeholder,
		&i.HelpText,
		&i.Options,
		&i.Validation,
		&i.IsRequired,
		&i.Position,
		&i.LanguageCode,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
