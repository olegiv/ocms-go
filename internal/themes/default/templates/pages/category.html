{{define "content"}}
<div class="archive-page category-archive">
    <header class="archive-header">
        <span class="archive-label">{{TTheme $.LangCode "frontend.category"}}</span>
        <h1 class="archive-title">{{.Category.Name}}</h1>
        {{if .Category.Description}}
        <p class="archive-description">{{.Category.Description}}</p>
        {{end}}
        {{if .PageCount}}
        <p class="archive-count">{{.PageCount}} {{if eq .PageCount 1}}{{TTheme $.LangCode "frontend.post"}}{{else}}{{TTheme $.LangCode "frontend.posts"}}{{end}}</p>
        {{end}}
    </header>

    {{if .Pages}}
    <div class="posts-list">
        {{range .Pages}}
        <article class="post-item">
            {{if .FeaturedImage}}
            <div class="post-thumbnail">
                <a href="{{.URL}}">
                    <img src="{{.FeaturedImage}}"
                         srcset="{{.FeaturedImage}} 150w, {{.FeaturedImageSmall}} 400w, {{.FeaturedImageMedium}} 800w"
                         sizes="(max-width: 768px) 100vw, 200px"
                         alt="{{.Title}}"
                         loading="lazy">
                </a>
            </div>
            {{end}}
            <div class="post-content">
                <h2 class="post-title">
                    <a href="{{.URL}}">{{.Title}}</a>
                </h2>
                {{if .Excerpt}}
                <p class="post-excerpt">{{.Excerpt}}</p>
                {{end}}
                <div class="post-meta">
                    {{if .PublishedAt}}
                    <time datetime="{{.PublishedAt}}">{{formatDateLocale .PublishedAt $.LangCode}}</time>
                    {{end}}
                    {{if .Author}}
                    <span class="author">{{TTheme $.LangCode "frontend.by_author"}} {{.Author.Name}}</span>
                    {{end}}
                </div>
                {{if .Tags}}
                <div class="post-tags">
                    {{range .Tags}}
                    <a href="{{$.LangPrefix}}/tag/{{.Slug}}" class="tag">{{.Name}}</a>
                    {{end}}
                </div>
                {{end}}
            </div>
        </article>
        {{end}}
    </div>

    {{template "pagination.html" .}}

    {{else}}
    <div class="no-posts">
        <p>{{TTheme $.LangCode "frontend.no_posts_category"}}</p>
        <a href="/" class="btn btn-secondary">{{TTheme $.LangCode "frontend.go_home"}}</a>
    </div>
    {{end}}

    {{/* Subcategories */}}
    {{if .Subcategories}}
    <section class="subcategories">
        <h3>{{TTheme $.LangCode "frontend.subcategories"}}</h3>
        <ul class="subcategory-list">
            {{range .Subcategories}}
            <li>
                <a href="{{$.LangPrefix}}/category/{{.Slug}}">{{.Name}}</a>
                {{if .Count}}<span class="count">({{.Count}})</span>{{end}}
            </li>
            {{end}}
        </ul>
    </section>
    {{end}}
</div>
{{end}}
