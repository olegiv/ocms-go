{{define "footer.html"}}
<footer class="site-footer">
    <div class="container">
        <div class="footer-inner">
            {{/* Dynamic footer widgets from admin */}}
            {{if .Widgets}}
            <div class="footer-widgets">
                {{/* Footer Column 1 */}}
                {{with index .Widgets "footer-1"}}
                <div class="footer-column">
                    {{range .}}
                    <div class="footer-widget widget-{{.Type}}">
                        {{if .Title}}<h4>{{.Title}}</h4>{{end}}
                        {{.Content}}
                    </div>
                    {{end}}
                </div>
                {{end}}

                {{/* Footer Column 2 */}}
                {{with index .Widgets "footer-2"}}
                <div class="footer-column">
                    {{range .}}
                    <div class="footer-widget widget-{{.Type}}">
                        {{if .Title}}<h4>{{.Title}}</h4>{{end}}
                        {{.Content}}
                    </div>
                    {{end}}
                </div>
                {{end}}

                {{/* Footer Column 3 */}}
                {{with index .Widgets "footer-3"}}
                <div class="footer-column">
                    {{range .}}
                    <div class="footer-widget widget-{{.Type}}">
                        {{if .Title}}<h4>{{.Title}}</h4>{{end}}
                        {{.Content}}
                    </div>
                    {{end}}
                </div>
                {{end}}
            </div>
            {{end}}

            {{if .FooterNav}}
            <nav class="footer-nav footer-nav-columns" aria-label="Footer navigation">
                {{range .FooterNav}}
                <div class="footer-nav-column">
                    {{/* Level 1 - Column header (truncated) */}}
                    <a href="{{.URL}}" class="footer-nav-header">{{.Title}}</a>

                    {{if .Children}}
                    <ul class="footer-nav-list">
                        {{range .Children}}
                        {{/* Level 2 */}}
                        <li>
                            <a href="{{.URL}}">{{.Title}}</a>
                            {{if .Children}}
                            <ul class="footer-nav-sublist">
                                {{range .Children}}
                                {{/* Level 3 */}}
                                <li><a href="{{.URL}}">{{.Title}}</a></li>
                                {{end}}
                            </ul>
                            {{end}}
                        </li>
                        {{end}}
                    </ul>
                    {{end}}
                </div>
                {{end}}
            </nav>
            {{end}}

            <div class="footer-bottom">
                <div class="footer-copyright">
                    {{if .CopyrightText}}
                    <p>{{safeHTML .CopyrightText}}</p>
                    {{else}}
                    <p>&copy; {{.Year}} {{.SiteName}}. {{TTheme .LangCode "frontend.all_rights_reserved"}}</p>
                    {{end}}
                    {{if .FooterText}}
                    <p>{{safeHTML .FooterText}}</p>
                    {{end}}
                </div>

                {{if .SocialLinks}}
                <div class="social-links">
                    {{range .SocialLinks}}
                    <a href="{{.URL}}" target="_blank" rel="noopener noreferrer" aria-label="{{.Name}}">
                        {{.Icon}}
                    </a>
                    {{end}}
                </div>
                {{end}}
            </div>
        </div>
    </div>
</footer>
{{end}}
