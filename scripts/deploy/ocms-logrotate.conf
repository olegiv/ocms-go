# oCMS Log Rotation Configuration
# Install: sudo cp ocms-logrotate.conf /etc/logrotate.d/ocms
#
# This configuration rotates logs for all oCMS instances.
# Logs are rotated daily, kept for 30 days, and compressed.

/var/www/vhosts/*/ocms/logs/*.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 0640 root psaserv
    sharedscripts
    postrotate
        # Send SIGHUP to all running oCMS instances to reopen log files
        # This is only needed if the app holds log file handles open
        # oCMS uses slog which reopens files automatically, so this is optional
        /bin/true
    endscript
}

# Alternative: Per-instance configuration (if instances use different users)
# Uncomment and customize as needed:
#
# /var/www/vhosts/example.com/ocms/logs/*.log {
#     daily
#     rotate 30
#     compress
#     delaycompress
#     missingok
#     notifempty
#     create 0640 example_com psaserv
# }
